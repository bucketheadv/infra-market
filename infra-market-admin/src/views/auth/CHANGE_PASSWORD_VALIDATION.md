# 修改密码表单校验功能说明

## 概述
修改密码表单现在包含了完整的参数校验功能，确保用户输入的密码符合安全要求。

## 校验规则

### 1. 原密码校验
- **必填**: 原密码不能为空
- **长度**: 6-20位字符
- **触发时机**: 失去焦点时（blur）

### 2. 新密码校验
- **必填**: 新密码不能为空
- **长度**: 6-20位字符
- **不能重复**: 新密码不能与原密码相同
- **密码强度**: 必须包含字母、数字或特殊字符中的至少一种
- **触发时机**: 失去焦点时（blur）

### 3. 确认密码校验
- **必填**: 确认密码不能为空
- **一致性**: 必须与新密码完全一致
- **触发时机**: 失去焦点时（blur）

## 校验流程

### 提交前校验
1. 用户点击"确认修改"按钮
2. 系统调用 `formRef.value?.validate()` 进行表单验证
3. 如果验证失败，显示错误信息，不进行提交
4. 如果验证通过，继续执行密码修改逻辑

### 实时校验
- 用户在输入框中输入内容后，失去焦点时会触发校验
- 校验结果会实时显示在对应的表单项下方
- 错误信息使用红色文字显示

## 错误处理

### 表单验证失败
- 错误类型: `error?.errorFields`
- 错误信息: "请填写完整的表单信息"
- 处理方式: 阻止提交，显示错误提示

### API调用失败
- 错误类型: 其他错误
- 错误信息: 显示后端返回的错误信息或默认错误信息
- 处理方式: 显示错误提示，不重置表单

## 密码强度要求

### 基本要求
- 长度: 6-20位字符
- 不能与原密码相同
- 不能为空

### 安全要求
密码必须包含以下字符类型中的至少一种：
- **字母**: a-z, A-Z
- **数字**: 0-9
- **特殊字符**: !@#$%^&*()_+-=[]{}|;':",./<>?

## 用户体验优化

### 1. 实时反馈
- 输入时实时显示校验结果
- 错误信息清晰明确
- 成功状态有视觉反馈

### 2. 错误提示
- 使用中文错误信息，便于理解
- 错误信息具体明确，指出具体问题
- 提供解决建议

### 3. 提交控制
- 验证失败时禁用提交按钮
- 提交过程中显示加载状态
- 成功后自动清空表单

## 技术实现

### 校验器类型
1. **内置校验器**: required, min, max
2. **自定义校验器**: 密码强度检查、密码一致性检查
3. **异步校验器**: 支持异步验证逻辑

### 触发时机
- **blur**: 失去焦点时触发
- **change**: 值改变时触发
- **submit**: 提交时触发

### 错误处理
- 使用 try-catch 捕获验证错误
- 区分表单验证错误和API错误
- 提供友好的错误提示

## 安全考虑

### 1. 密码策略
- 强制密码长度限制
- 防止使用过于简单的密码
- 防止密码重复使用

### 2. 输入验证
- 前端实时验证，减少无效请求
- 后端二次验证，确保数据安全
- 防止恶意输入

### 3. 用户体验
- 清晰的错误提示
- 实时的验证反馈
- 合理的验证规则

## 维护说明

### 修改校验规则
1. 在 `rules` 对象中修改对应字段的校验规则
2. 更新自定义校验器的逻辑
3. 测试各种边界情况

### 添加新的校验
1. 在 `rules` 中添加新的校验规则
2. 实现自定义校验函数
3. 更新错误提示信息

### 国际化支持
- 错误信息使用中文，便于维护
- 可以扩展为多语言支持
- 错误信息集中管理
